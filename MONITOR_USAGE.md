# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ fail2ban

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
fail2ban-monitor.sh
```

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö jail
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–±–∞–Ω–µ–Ω–Ω—ã—Ö IP –¥–ª—è –∫–∞–∂–¥–æ–≥–æ jail
- –ú–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π

### –î–µ–π—Å—Ç–≤–∏—è –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é:

1. **–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–º–µ—Ä jail** (1, 2, 3...) - –ø–µ—Ä–µ—Ö–æ–¥ –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º jail
2. **`a`** - –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö jail
3. **`r`** - –æ–±–Ω–æ–≤–∏—Ç—å —ç–∫—Ä–∞–Ω
4. **`0`** - –≤—ã—Ö–æ–¥

### –ú–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è IP

–ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ jail –≤—ã –ø–æ–ø–∞–¥–µ—Ç–µ –≤ –º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **–†–∞–∑–±–∞–Ω–∏—Ç—å IP** - –≤–≤–µ–¥–∏—Ç–µ IP –∞–¥—Ä–µ—Å –¥–ª—è —Ä–∞–∑–±–∞–Ω–∞
2. **–ó–∞–±–∞–Ω–∏—Ç—å IP** - –≤–≤–µ–¥–∏—Ç–µ IP –∞–¥—Ä–µ—Å –¥–ª—è –±–∞–Ω–∞ (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)
3. **–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å** - –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ —ç–∫—Ä–∞–Ω–µ
4. **–ù–∞–∑–∞–¥** - –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

## üìä –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç

–î–ª—è –∫–∞–∂–¥–æ–≥–æ jail:
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ (—Ç–µ–∫—É—â–∏—Ö –∏ –≤—Å–µ–≥–æ)
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–±–∞–Ω–µ–Ω–Ω—ã—Ö IP (—Ç–µ–∫—É—â–∏—Ö –∏ –≤—Å–µ–≥–æ)
- ‚úÖ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–±–∞–Ω–µ–Ω–Ω—ã—Ö IP –∞–¥—Ä–µ—Å–æ–≤
- ‚úÖ –í—Ä–µ–º—è –±–∞–Ω–∞ (–≤ —á–∞—Å–∞—Ö, –º–∏–Ω—É—Ç–∞—Ö, —Å–µ–∫—É–Ω–¥–∞—Ö)

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞
```bash
fail2ban-monitor.sh
# –í—ã–±–µ—Ä–∏—Ç–µ 'a' –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö jail
```

### –†–∞–∑–±–∞–Ω IP
```bash
fail2ban-monitor.sh
# 1) –í—ã–±–µ—Ä–∏—Ç–µ jail (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1 –¥–ª—è sshd)
# 2) –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ 1 (–†–∞–∑–±–∞–Ω–∏—Ç—å IP)
# 3) –í–≤–µ–¥–∏—Ç–µ IP –∞–¥—Ä–µ—Å
```

### –ë–∞–Ω IP –≤—Ä—É—á–Ω—É—é
```bash
fail2ban-monitor.sh
# 1) –í—ã–±–µ—Ä–∏—Ç–µ jail
# 2) –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ 2 (–ó–∞–±–∞–Ω–∏—Ç—å IP)
# 3) –í–≤–µ–¥–∏—Ç–µ IP –∞–¥—Ä–µ—Å
# 4) –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ (y)
```

## ‚å®Ô∏è –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

- **Enter** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ
- **0** - –≤—ã—Ö–æ–¥/–Ω–∞–∑–∞–¥
- **a** - –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ jail
- **r** - –æ–±–Ω–æ–≤–∏—Ç—å

## üé® –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è

- üî¥ **–ö—Ä–∞—Å–Ω—ã–π** - –∑–∞–±–∞–Ω–µ–Ω–Ω—ã–µ IP, –æ—à–∏–±–∫–∏
- üü¢ **–ó–µ–ª–µ–Ω—ã–π** - —É—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- üü° **–ñ–µ–ª—Ç—ã–π** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- üîµ **–°–∏–Ω–∏–π** - –¥–µ–π—Å—Ç–≤–∏—è, –º–µ–Ω—é
- üîµ **–ì–æ–ª—É–±–æ–π** - –∑–∞–≥–æ–ª–æ–≤–∫–∏

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –¢—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ root –∏–ª–∏ sudo –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è fail2ban
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- IP –∞–¥—Ä–µ—Å–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç–∞
- –ü—Ä–∏ –±–∞–Ω–µ –≤—Ä—É—á–Ω—É—é —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

---

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:** –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ —Ä–æ–ª–∏ fail2ban
